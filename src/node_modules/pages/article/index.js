import React from 'react'
import { useEffect } from 'react'
import useFetch from 'hooks/useFetch'
import { Link } from 'react-router-dom'

const Article = (props) => {
  console.log('props', props)
  let bookId = props.match.params.bookId
  console.log('bookId', bookId)
  const apiURL = `/book/${bookId}`  
  const [{ response, isLoading, error }, doFetch] = useFetch(apiURL)
  const image = 'https://static.productionready.io/images/smiley-cyrus.jpg'
   
  useEffect(() => {
    doFetch()
  }, [doFetch])

  return (
    <div className='article-page'>
      <div className='banner'>
        {!isLoading && response && (
          <div className='container'>
            <h1>{response.data.title}</h1>
            <div className='article-meta'>
              <img src={image} />
              <Link to={`/profiles/${response.data.author.name}`}>
                {response.data.author.name}
                {console.log('res',response.data)}
                <div className="preview-link">
                  {response.data.author.description}
                </div>
              </Link>
            </div>
          </div>
        )}
      </div>
    </div>
  )
}

export default Article


